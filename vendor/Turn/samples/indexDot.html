<!doctype html>
<html>
<head>
<script type="text/javascript" src="../extras/jquery.min.1.7.js"></script>
<script type="text/javascript" src="../extras/modernizr.2.5.3.min.js"></script>
<script type="text/javascript" src="../extras/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="../lib/hash.js"></script>
<script type="text/javascript" src="loudon.json"></script>

<script type="text/javascript" src="underscore-min.js"></script>
<script type="text/javascript" src="../lib/turn.min.js"></script>
<script type="text/javascript">
	
	$(window).ready(function() {

	_.each(Loudon,function(s,k){
	
		$("#showList").append("<li class='showChoice' id='"+s.name+"'>"+s.name+"</li>");
	});
	
	$(".showChoice").click(function(){
		
	    curTitle = $(this).attr("id");
	    alert(curTitle);
	    if ($("#magazine").turn){
		$("#magazine").turn("destroy");
		}
		show = _.find(Loudon,function(v,k){
			return v.name==curTitle;
		});
		
		_.each(show.images,function(v,k){
		$("#magazine").append("<div style='background-image:url(\"http://images.nypl.org/index.php?id="+v+"&t=w\");'></div>");

		});
			

	
		$('#magazine').turn({
							display: 'double',
							acceleration: true,
							gradients: !$.isTouch,
							elevation:50,
							
							});
					
	});
	
		

	//console.log(JSON.stringify(Annie));

	
	
	
	$(window).bind('keydown', function(e){
		
		if (e.keyCode==37)
			$('#magazine').turn('previous');
		else if (e.keyCode==39)
			$('#magazine').turn('next');
			
	});
	});

</script>

<style type="text/css">
body{
	background:#ccc;
}
#magazine{
	width:987px;
	height:600px;
	padding-bottom: 50px;
}
#magazine .turn-page{
	background-color:#ccc;
	background-size:100% 100%;
}
.controls{

}
</style>
</head>
<body>
<div id="magazine">

</div>

<div id="controls">

<ul id="showList">
	
</ul><br/></div>
<div id="pageCount"></div>

</body>


</html>
