<html lang="en">
<head>

<script type="text/javascript" src="../../extras/jquery.min.1.7.js"></script>
<script type="text/javascript" src="../../extras/underscore-min.js"></script>
<script type="text/javascript" src="../../extras/jquery-ui-1.8.20.custom.min.js"></script>
<script type="text/javascript" src="../../extras/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="../../extras/modernizr.2.5.3.min.js"></script>
<script type="text/javascript" src="./Loudon.json"></script>

<script type="text/javascript" src="../../lib/hash.js"></script>
</head>
<body>

<div id="book-wrapper">
	<div id="book-zoom">
		<div class="dl-book">
			
		</div>
	</div>


<div id="slider-bar" class="turnjs-slider">
	<div id="slider"></div>
</div>
</div>


<script type="text/javascript">
curShow = Loudon[2].images;
$(document).ready(function(){
_.each(curShow,function(i){
	$(".dl-book").append("<div><img src=\"http://images.nypl.org/index.php?t=w&id="+i+"\"/></div>");
});


	
});





	// URIs
	
	Hash.on('^page\/([0-9]*)$', {
		yep: function(path, parts) {
			var page = parts[1];

			if (page!==undefined) {
				if ($('.dl-book').turn('is'))
					$('.dl-book').turn('page', page);
			}

		},
		nop: function(path) {

			if ($('.dl-book').turn('is'))
				$('.dl-book').turn('page', 1);
		}
	});

	// Arrows

	$(document).keydown(function(e){

		var previous = 37, next = 39;

		switch (e.keyCode) {
			case previous:

				$('.dl-book').turn('previous');

			break;
			case next:
				
				$('.dl-book').turn('next');

			break;
		}

	});


	// Flipbook
	
	var flipbook = $('.dl-book');

	//	flipbook.bind(($.isTouch) ? 'touchend' : 'click', zoomHandle);

		flipbook.turn({
			elevation: 50,
			autoCenter: true,
			duration: 1000,
			
		});


	//$('#slider').slider('option', 'max', numberOfViews(flipbook));

	flipbook.addClass('animated');
}



</script>

</body>
</html>