<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>The Dorothy Loudon Collection</title>
  <meta name="description" content="The Dorothy Loudon Collection at the New York Public Library">
  <meta name="author" content="New York Public Library">
	
  <!-- Framework CSS -->
	    <link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="screen, projection">
	    <link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print">
	    <!--[if lt IE 8]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->
		
	<link rel="stylesheet" href="css/reset.css">

	
	<!-- Script below allows html 5 elements to display properly in IE 6-8-->
  	<!--[if lt IE 9]>
  		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->

	<!-- initial jquery setup -->

	<script type="text/javascript" src="./vendor/rcarousel/widget/lib/jquery-1.7.1.min.js"></script>
	<script type="text/javascript" src="./js/underscore-min.js"></script>
	
	<script type="text/javascript" src="./data/LoudonTimeline.js"></script>
	<!-- "Backstretch" script for full-screen background image -->
	<script type="text/javascript" src="js/jquery.backstretch.min.js"></script>
	<script type="text/javascript">
	  $.backstretch("images/background.jpg", {speed: 150});
	</script>
	

 <link type="text/css" rel="stylesheet" href="./vendor/rcarousel/widget/css/rcarousel.css" />
		<style type="text/css">
			#slidecontainer {
				width: 800px;
				height: 400px;
				float:left;
				margin: 0 auto;
			}
			
			#carousel {
				width: 780px;
				margin: 0 auto;
			}
			
			#ui-carousel-next, #ui-carousel-prev {
				width: 60px;
				height: 240px;
				background: url(./vendor/rcarousel/examples/images/arrow-left.png) transparent center center no-repeat;
				display: block;
	
				top: 0;
				z-index: 100;
			}

			#ui-carousel-next {
				float:left;
				background-image: url(./vendor/rcarousel/examples/images/arrow-right.png);
			}

			#ui-carousel-prev {
				float: left;
			}
			
			#ui-carousel-next > span, #ui-carousel-prev > span {
				display: none;
			}
			
			.slide {
				margin: 0;
				position: relative;
			}
			
			.tablePart{
				float:left;
			}
			
			
			#pages {
				width: 150px;
				margin: 0 auto;
			}
			.selectedRow{
				background: none repeat scroll 0 0 cyan;
			}
</style>
			<script type="text/javascript" src="./vendor/rcarousel/widget/lib/jquery.ui.core.js"></script>
		<script type="text/javascript" src="./vendor/rcarousel/widget/lib/jquery.ui.widget.js"></script>
		<script type="text/javascript" src="./vendor/rcarousel/widget/lib/jquery.ui.rcarousel.js"></script>
		   <script type="text/javascript" src="./vendor/fancybox/jquery.easing-1.3.pack.js"></script>
  <script type="text/javascript" src="./vendor/fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
 
    <script type="text/javascript" src="./vendor/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
  <link type="text/css" rel="stylesheet" href="./vendor/fancybox/jquery.fancybox-1.3.4.css"></link>
	<script type="text/javascript">
	fb = $.fancybox;
	$(window).bind('hashchange', function() {
		
		  url = window.location.href;
			
		  hash = url.substring(url.indexOf("#")+1);
		 alert(hash);
		  if (hash.substring(0,4)=="item"){
		
			  parts = hash.split("/");  
			framestring = "<iframe id='bookframe' height=900 width=1000 src='./LoudonPages.html#"+parts[1]+"/1'></iframe>";
		
			fb(framestring, {
				'hideOnOverlayClick' : false,
				'hideOnContentClick' : false,
				'scrolling' : true,
				'autoScale' : false,
				'autoDimensions' : true,
				'onCleanup' : function(e) {
					$("#bookframe").focus();
				}
				}
			);
			fb.resize();
		}
		}
		);
	
	jQuery(function($) {
		function generatePages() {
			var _total, i, _link;
			
			_total = $( "#carousel" ).rcarousel( "getTotalPages" );
			
			for ( i = 0; i < _total; i++ ) {
				_link = $( "<a href='#'></a>" );
				
				$(_link)
					.bind("click", {page: i},
						function( event ) {
							$( "#carousel" ).rcarousel( "goToPage", event.data.page );
							event.preventDefault();
						}
					)
					.addClass( "bullet off" )
					.appendTo( "#pages" );
			}
			
			// mark first page as active
			$( "a:eq(0)", "#pages" )
				.removeClass( "off" )
				.addClass( "on" )
				.css( "background-image", "url(images/page-on.png)" );

		}

		function pageLoaded( event, data ) {

			row = $("#overviewTable").find("tr").eq(parseInt(data.page)).find("td");
		
			$(".selectedRow").removeClass("selectedRow");
			$(row).addClass("selectedRow");
			$( "a.on", "#pages" )
				.removeClass( "on" )
				.css( "background-image", "url(images/page-off.png)" );

			$( "a", "#pages" )
				.eq( data.page )
				.addClass( "on" )
				.css( "background-image", "url(images/page-on.png)" );
		}
		$(document).ready(function(){
		sorted = _.sortBy(LoudonTimeline.date,function(val){
			return val.startDate;
		} );
	
		$.each(sorted,function(key,val){
			$("#carousel").append("<div class='slide'><div class='span-8 append-1 clear'><img width=300 src='"+val.asset.media+"' alt='Scrapbook Image' /><p class='title'>"+val.asset.caption+"</p></div><div class='span-10 append-1 last'><h3 class='showTitle'>"+val.headline+"</h3><div class='date'>"+val.startDate+"</div>"+val.text+"</div></div>");
			console.log(key);
			//if (parseInt(key)%4==0){
			
				$("#overviewTable").append("<tr><td>"+val.headline+"</td></tr>");
				
			//}
			/*else{
			
				$("#overviewTable").find("tr").last().append("<td>"+val.headline+"</td>");
			}*/
		});	
		startCarousel();
		
		});
		
	function startCarousel(){

		$("#carousel").rcarousel(
			{
				visible: 1,
				step: 1,
				speed: 400,
				auto: {
					enabled: false
				},
				width: 800,
				height: 800,
				start: generatePages,
				pageLoaded: pageLoaded
			}
		);
		
		$( "#ui-carousel-next" )
			.add( "#ui-carousel-prev" )
			.add( ".bullet" )
			.hover(
				function() {
					$( this ).css( "opacity", 0.7 );
				},
				function() {
					$( this ).css( "opacity", 1.0 );
				}
			);
	}	
	});
	
	
	</script>
	  	<link rel="stylesheet" href="css/style.css"/>
    <link rel="shortcut icon" href="images/favicon.ico" />
</head>
<body id="home">
	<img class="spotlight" src="images/bg_spotlight.png" />
	<div class="container">
		<div class="span-4 logo"><a href="index.html"><h1>The <strong>Dorothy Loudon</strong> Collection</h1></a></div>
		<div class="span-16 append-4 last">
			<ul id="nav">
				<li class="span-4 nav1 active"><a href="index.html"><h2>Welcome</h2></a></li>
				<li class="span-4 nav2"><a href="biography.html"><h2>Biography</h2></a></li>
				<li class="span-4 nav3"><a href="works.html"><h2>Major Works</h2></a></li>
				<li class="span-4 last nav4"><a href="guide.html"><h2>Collection Guide</h2></a></li>
			</ul>
		</div>
		<div class="clear span-24 last">
		<a href="#" id="ui-carousel-prev"><span>prev</span></a>
		<div id="slidecontainer">
		
				<div id="carousel">
		<div class="slide">
		
		<div class="span-8 append-1 clear">
			<img id='topImage' src='images/DorothyLoudon.png' alt="Dorothy Loudon" />
			<p class="title">Dorothy Loudon</p>
		</div>
		<div id="main" class="span-10 append-1 last">
			<h3>Welcome</h3>
			<p>The Dorothy Loudon Collection at the New York Public Library covers the personal life and professional career of Dorothy Loudon, the singer, comedienne and Tony Award-winning actress, who appeared in television shows, films, and on Broadway. Among her many memorable roles, Loudon is perhaps best known for originating the roles of Miss Hannigan in the musical Annie and of Bea Asher in the Michael Bennett musical, Ballroom. This site includes images of Loudon’s stage work pulled from the Library’s photograph collections as well as selections from the Dorothy Loudon collection itself (which may be accessed in its entirety at the Library for the Performing Arts at Lincoln Center).</p>
		</div>
		</div>
		

		
		</div>
	
				
		</div>
		
		<a href="#" id="ui-carousel-next"><span>next</span></a>		
	<div class="span-8 tablePart">
			<table id="overviewTable">
			
			</table>
		</div>
</div>
		
	
	
	</div>
	
	<script src="js/scripts.js"></script>
</body>
</html>